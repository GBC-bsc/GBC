"use strict";(self["webpackChunknewton_protocol"]=self["webpackChunknewton_protocol"]||[]).push([[564],{1166:function(e,t,a){a.d(t,{Z:function(){return f}});var n=a(6252),l=a(3577);const s=e=>((0,n.dD)("data-v-25f1e852"),e=e(),(0,n.Cn)(),e),c={class:"footBtm"},o=s((()=>(0,n._)("div",{class:"line"},null,-1))),i={class:"welcome"},d=s((()=>(0,n._)("div",{class:"line"},null,-1)));function r(e,t){return(0,n.wg)(),(0,n.iD)("div",c,[o,(0,n._)("div",i,(0,l.zw)(e.$t("欢迎来到GBC")),1),d])}var u=a(3744);const v={},m=(0,u.Z)(v,[["render",r],["__scopeId","data-v-25f1e852"]]);var f=m},7515:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});a(560);var n=a(6252),l=a(2262),s=a(3577),c=a(360),o=a(9412),i=a(3907),d=a(2201),r=a(2438),u=a(8552),v=a(5583),m=a(1166);const f=e=>((0,n.dD)("data-v-29d46f4b"),e=e(),(0,n.Cn)(),e),b={class:"bind"},g={class:"main"},p=f((()=>(0,n._)("img",{class:"zan",src:c,alt:""},null,-1))),_={class:"title"},w=f((()=>(0,n._)("div",{class:"line"},null,-1))),C=f((()=>(0,n._)("img",{class:"bi",src:o,alt:""},null,-1))),h={class:"btn"},I={class:"btm"};var k={__name:"index",setup(e){const t=(0,i.oR)(),a=(0,d.yj)(),c=(0,d.tv)(),{t:o}=(0,u.QT)(),f=(0,l.iH)(""),k=()=>{const{state:{web3:{web3Instance:e,mainContract:a}}}=t;a.methods.getrefMap(localStorage.getItem("address")).call({from:localStorage.getItem("address")}).then((e=>{e[0]&&"0x0000000000000000000000000000000000000000"!=e[0]&&(f.value=e[0])})).catch((e=>{console.log("err----",e)}))},z=(0,l.iH)(a.query.invite),F=(0,l.iH)(!1),S=()=>{if(f.value)return(0,r.CF)(o("已经绑定过上级"));if(!z.value)return(0,r.CF)(o("请输入上级地址"));const{state:{web3:{web3Instance:e,mainContract:a}}}=t;let n=(0,r.di)({message:o("绑定中..."),forbidClick:!0,duration:0});F.value=!0,a.methods.band(z.value).send({from:localStorage.getItem("address")}).then((()=>{n.close(),(0,r.CF)(o("绑定成功")),F.value=!1,c.push("/mintage")})).catch((()=>{n.close(),(0,r.CF)(o("交易失败,请再次进行")),F.value=!1}))},Z=(0,n.Fl)((()=>t.state.web3.web3Instance));return(0,n.YP)(Z,((e,t)=>{e&&k()}),{immediate:!0}),(e,t)=>{const a=(0,n.up)("van-field"),c=(0,n.up)("van-button");return(0,n.wg)(),(0,n.iD)("div",b,[(0,n.Wm)((0,l.SU)(v.Z)),(0,n._)("div",g,[p,(0,n._)("div",_,(0,s.zw)(e.$t("绑定推荐地址")),1),w,(0,n.Wm)(a,{class:"input",modelValue:z.value,"onUpdate:modelValue":t[0]||(t[0]=e=>z.value=e),label:"","label-width":"0",border:!1},null,8,["modelValue"]),C]),(0,n._)("div",h,[(0,n.Wm)(c,{class:"bindBtn",loading:F.value,onClick:S},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.$t("绑定")),1)])),_:1},8,["loading"])]),(0,n._)("div",I,[(0,n.Wm)((0,l.SU)(m.Z))])])}}},z=a(3744);const F=(0,z.Z)(k,[["__scopeId","data-v-29d46f4b"]]);var S=F},9412:function(e,t,a){e.exports=a.p+"img/bi.6056c74a.png"},360:function(e,t,a){e.exports=a.p+"img/zan.ffc2fdc1.png"}}]);